//! Platform trait - GENERATED by spire-loom
//!
//! This trait abstracts all <%= coreName %> operations across platforms.
//! Implementations:
//! - Desktop: Direct <%= coreCrateName %> calls
//! - Android: JNI calls to <%= coreName %>-android service
//! - iOS: Not implemented (stub)
//!
//! Generated from Management definitions with @reach('Local') | @reach('Global')

use crate::Result;
use crate::models::*;
use <%= coreCrateName %>::signal::EventBus;
use <%= coreCrateName %>::thestream::TheStream;

/// Platform trait abstracts all <%= coreName %> operations.
///
/// This allows the tauri-plugin to work on different platforms:
/// - Desktop: Direct <%= coreName %> integration
/// - Android: JNI calls to foreground service
/// - iOS: Not implemented (stub)
pub trait Platform: Send + Sync {
  /// Get the event bus for this platform.
  fn event_bus(&self) -> &EventBus;

  /// Get TheStream instance for adding content.
  fn stream(&self) -> &TheStream;

  /// Exit the application cleanly.
  fn exit(&self, code: i32);

  /// Request permissions (notifications, etc).
  fn request_permissions(&self) -> Result<NotificationPermissionStatus>;

  /// Called when the app is shutting down.
  fn shutdown(&self) -> Result<()>;

<% methods.forEach(function(method) { -%>
  /// <%- method.description || method.name %>
  fn <%= method.name %>(
    &self,
    <% method.params.forEach(function(param, idx) { -%>
    <%= param.name %>: <%- param.rsType %><% if (idx < method.params.length - 1) { %>,<% } %>
    <% }); %>
  ) -> Result<<%- method.rsReturnType %>>;

<% }); -%>
}
