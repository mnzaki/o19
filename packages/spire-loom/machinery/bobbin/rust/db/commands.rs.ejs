// GENERATED BY db-binding Treadle - Do not edit

use crate::db::Result;
use crate::<%= entity.lower %>::<%= entity.name %>;

/// DbCommand variants for <%= entity.name %> operations
#[derive(Debug)]
pub enum <%= entity.name %>Command {
<% if (operations.includes('create')) { -%>
  Insert<%= entity.name %> {
    url: String,
    title: Option<String>,
    notes: Option<String>,
    content_hash: Option<String>,
    respond: oneshot::Sender<Result<i64>>,
  },
<% } -%>
<% if (operations.includes('read')) { -%>
  Get<%= entity.name %>ById {
    id: i64,
    respond: oneshot::Sender<Result<Option<<%= entity.name %>>>>,
  },
  Get<%= entity.name %>ByUrl {
    url: String,
    respond: oneshot::Sender<Result<Option<<%= entity.name %>>>>,
  },
<% } -%>
<% if (operations.includes('list')) { -%>
  List<%= entity.name %>s {
    limit: Option<usize>,
    offset: Option<usize>,
    respond: oneshot::Sender<Result<Vec<<%= entity.name %>>>>,
  },
<% } -%>
<% if (operations.includes('update')) { -%>
  Update<%= entity.name %> {
    id: i64,
    title: Option<String>,
    notes: Option<String>,
    respond: oneshot::Sender<Result<bool>>,
  },
<% } -%>
<% if (operations.includes('delete')) { -%>
  Delete<%= entity.name %> {
    id: i64,
    respond: oneshot::Sender<Result<bool>>,
  },
  Delete<%= entity.name %>ByUrl {
    url: String,
    respond: oneshot::Sender<Result<bool>>,
  },
<% } -%>
}

// Re-export as part of DbCommand enum
// impl DbActor {
//   fn handle_<%= entity.lower %>_command(&self, cmd: <%= entity.name %>Command) { ... }
// }
