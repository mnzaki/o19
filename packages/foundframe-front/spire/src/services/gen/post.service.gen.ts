// GENERATED BY SPIRE-LOOM - DO NOT EDIT (even if LLM)
// 
// This file is automatically generated from a template.
// Changes will be overwritten on next generation.
// 
// Template: node_modules/@o19/spire-loom/machinery/bobbin/ddd/service.ts.ejs
// Template file: service.ts.ejs
// To override: Copy this template to loom/bobbin/ddd/service.ts.ejs
// 
// To modify the generated output, edit the template file above.
/**
 * PostService
 * 
 * Domain service for Post operations.
 * Routes read operations to readAdaptor, write operations to writeAdaptor.
 * 
 * @generated by ddd-services treadle
 */

import type {
  PostPort,
  PostReadAdaptor,
  PostWriteAdaptor
} from '../../ports/gen/post.port.gen.js';

export class PostService implements PostPort {
  constructor(
    private readAdaptor: PostReadAdaptor,
    private writeAdaptor: PostWriteAdaptor
  ) {}

  // ============================================================================
  // Read Operations (via Kysely)
  // ============================================================================

  async getPostByUrl(
    pkbUrl: string,
  ): Promise<Post> {
    return this.readAdaptor.getPostByUrl(
      pkbUrl,
    );
  }

  async listPosts(
    directory?: string,
  ): Promise<string[][]> {
    return this.readAdaptor.listPosts(
      directory,
    );
  }

  // ============================================================================
  // Write Operations (via Tauri)
  // ============================================================================

  async addPost(
    content: string,
    title?: string,
    tags?: string[],
  ): Promise<void> {
    return this.writeAdaptor.addPost(
      content,
      title,
      tags,
    );
  }

  async updatePost(
    pkbUrl: string,
    content: string,
    title?: string,
  ): Promise<boolean> {
    return this.writeAdaptor.updatePost(
      pkbUrl,
      content,
      title,
    );
  }

  async deletePost(
    pkbUrl: string,
  ): Promise<boolean> {
    return this.writeAdaptor.deletePost(
      pkbUrl,
    );
  }

  // ============================================================================
  // Passthrough Operations (implementation-specific)
  // ============================================================================
}
