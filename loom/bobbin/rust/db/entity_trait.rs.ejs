// GENERATED BY db-binding Treadle - Do not edit

use async_trait::async_trait;
use crate::db::{DbHandle, Result};
use crate::<%= entity.lower %>::<%= entity.name %>;

/// Database operations for <%= entity.name %>
#[async_trait]
pub trait <%= entity.name %>Db {
<% if (operations.includes('create')) { -%>
  /// Insert a new <%= entity.lower %>
  async fn insert_<%= entity.lower %>(
    &self,
    url: &str,
    title: Option<&str>,
    notes: Option<&str>,
    content_hash: Option<&str>,
  ) -> Result<i64>;
<% } -%>
<% if (operations.includes('read')) { -%>
  /// Get <%= entity.lower %> by ID
  async fn get_<%= entity.lower %>_by_id(&self, id: i64) -> Result<Option<<%= entity.name %>>>;

  /// Get <%= entity.lower %> by unique field (e.g., URL for bookmarks)
  async fn get_<%= entity.lower %>_by_url(&self, url: &str) -> Result<Option<<%= entity.name %>>>;
<% } -%>
<% if (operations.includes('list')) { -%>
  /// List all <%= entity.lower %>s with pagination
  async fn list_<%= entity.lower %>s(
    &self,
    limit: Option<usize>,
    offset: Option<usize>,
  ) -> Result<Vec<<%= entity.name %>>>;
<% } -%>
<% if (operations.includes('update')) { -%>
  /// Update <%= entity.lower %> fields
  async fn update_<%= entity.lower %>(
    &self,
    id: i64,
    title: Option<&str>,
    notes: Option<&str>,
  ) -> Result<bool>;
<% } -%>
<% if (operations.includes('delete')) { -%>
  /// Delete <%= entity.lower %> by ID
  async fn delete_<%= entity.lower %>(&self, id: i64) -> Result<bool>;

  /// Delete <%= entity.lower %> by unique field
  async fn delete_<%= entity.lower %>_by_url(&self, url: &str) -> Result<bool>;
<% } -%>
}

/// Implementation via DbActor
#[async_trait]
impl <%= entity.name %>Db for DbHandle {
<% if (operations.includes('create')) { -%>
  async fn insert_<%= entity.lower %>(
    &self,
    _url: &str,
    _title: Option<&str>,
    _notes: Option<&str>,
    _content_hash: Option<&str>,
  ) -> Result<i64> {
    todo!("Generated implementation")
  }
<% } -%>
<% if (operations.includes('read')) { -%>
  async fn get_<%= entity.lower %>_by_id(&self, _id: i64) -> Result<Option<<%= entity.name %>>> {
    todo!("Generated implementation")
  }

  async fn get_<%= entity.lower %>_by_url(&self, _url: &str) -> Result<Option<<%= entity.name %>>> {
    todo!("Generated implementation")
  }
<% } -%>
<% if (operations.includes('list')) { -%>
  async fn list_<%= entity.lower %>s(
    &self,
    _limit: Option<usize>,
    _offset: Option<usize>,
  ) -> Result<Vec<<%= entity.name %>>> {
    todo!("Generated implementation")
  }
<% } -%>
<% if (operations.includes('update')) { -%>
  async fn update_<%= entity.lower %>(
    &self,
    _id: i64,
    _title: Option<&str>,
    _notes: Option<&str>,
  ) -> Result<bool> {
    todo!("Generated implementation")
  }
<% } -%>
<% if (operations.includes('delete')) { -%>
  async fn delete_<%= entity.lower %>(&self, _id: i64) -> Result<bool> {
    todo!("Generated implementation")
  }

  async fn delete_<%= entity.lower %>_by_url(&self, _url: &str) -> Result<bool> {
    todo!("Generated implementation")
  }
<% } -%>
}
