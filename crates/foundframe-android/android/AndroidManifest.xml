<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ty.circulari.o19">

    <!-- Permissions for handling shared content -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
    <uses-permission android:name="android.permission.READ_MEDIA_VIDEO" />

    <!-- Camera permissions -->
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:maxSdkVersion="28" />

    <uses-feature android:name="android.hardware.camera.any" android:required="false" />

    <permission
        android:name="ty.circulari.o19.BIND_FOUNDFRAME_RADICLE"
        android:label="Bind to Foundframe Radicle Service"
        android:protectionLevel="signature|normal" />
    <uses-permission android:name="ty.circulari.o19.BIND_FOUNDFRAME_RADICLE" />

    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />

    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC" />
    <application>
        <!--
            ReceiveShareActivity

            Handles ACTION_SEND and ACTION_SEND_MULTIPLE intents for receiving
            shares from other apps. Uses the "Flutter Add App" pattern where the
            activity runs in the same task as the main Tauri activity and returns
            results via the ShareResultBridge.
        -->
        <activity
            android:name=".activities.ReceiveShareActivity"
            android:exported="true"
            android:theme="@style/O19.ReceiveShareTheme"
            android:launchMode="singleTask"
            android:taskAffinity="${applicationId}.share"
            android:documentLaunchMode="intoExisting"
            android:excludeFromRecents="true"
            android:noHistory="true">

            <!-- Handle text shares -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="text/plain" />
            </intent-filter>

            <!-- Handle URL shares -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="text/x-uri" />
            </intent-filter>

            <!-- Handle image shares (single) -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="image/*" />
            </intent-filter>

            <!-- Handle video shares (single) -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="video/*" />
            </intent-filter>

            <!-- Handle audio shares (single) -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="audio/*" />
            </intent-filter>

            <!-- Handle any file type (single) -->
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="*/*" />
            </intent-filter>

            <!-- Handle multiple image shares -->
            <intent-filter>
                <action android:name="android.intent.action.SEND_MULTIPLE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="image/*" />
            </intent-filter>

            <!-- Handle multiple video shares -->
            <intent-filter>
                <action android:name="android.intent.action.SEND_MULTIPLE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="video/*" />
            </intent-filter>

            <!-- Handle mixed multiple shares -->
            <intent-filter>
                <action android:name="android.intent.action.SEND_MULTIPLE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="*/*" />
            </intent-filter>
        </activity>

    <service
            android:name=".service.FoundframeRadicleService"
            android:process=":foundframe"
            android:exported="true"
            android:permission="ty.circulari.o19.BIND_FOUNDFRAME_RADICLE"
            android:foregroundServiceType="dataSync"
            android:enabled="true">
            <intent-filter>
                <action android:name="ty.circulari.o19.IFoundframeRadicle" />
            </intent-filter>
        </service>

  </application>
</manifest>
