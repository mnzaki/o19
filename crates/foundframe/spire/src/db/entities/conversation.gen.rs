// GENERATED BY DBBINDING TREADLE - Do not edit

use async_trait::async_trait;
use crate::db::{DbHandle, Result};
use crate::conversation::Conversation;

/// Database operations for Conversation
#[async_trait]
pub trait ConversationDb {

  /// Insert a new conversation
  async fn insert_conversation(
    &self,
    url: &str,
    title: Option<&str>,
    notes: Option<&str>,
    content_hash: Option<&str>,
  ) -> Result<i64>;

  /// Get conversation by ID
  async fn get_conversation_by_id(&self, id: i64) -> Result<Option<Conversation>>;

  /// Get conversation by unique field (e.g., URL for bookmarks)
  async fn get_conversation_by_url(&self, url: &str) -> Result<Option<Conversation>>;

  /// List all conversations with pagination
  async fn list_conversations(
    &self,
    limit: Option<usize>,
    offset: Option<usize>,
  ) -> Result<Vec<Conversation>>;

  /// Update conversation fields
  async fn update_conversation(
    &self,
    id: i64,
    title: Option<&str>,
    notes: Option<&str>,
  ) -> Result<bool>;

  /// Delete conversation by ID
  async fn delete_conversation(&self, id: i64) -> Result<bool>;

  /// Delete conversation by unique field
  async fn delete_conversation_by_url(&self, url: &str) -> Result<bool>;
}

/// Implementation via DbActor
#[async_trait]
impl ConversationDb for DbHandle {

  /// Insert a new conversation
  async fn insert_conversation(
    &self,
    url: &str,
    title: Option<&str>,
    notes: Option<&str>,
    content_hash: Option<&str>,
  ) -> Result<i64>; {
    // Implementation sends DbCommand to actor
    todo!("Generated implementation")
  }

  /// Get conversation by ID
  async fn get_conversation_by_id(&self, id: i64) -> Result<Option<Conversation>>;

  /// Get conversation by unique field (e.g., URL for bookmarks)
  async fn get_conversation_by_url(&self, url: &str) -> Result<Option<Conversation>>; {
    // Implementation sends DbCommand to actor
    todo!("Generated implementation")
  }

  /// List all conversations with pagination
  async fn list_conversations(
    &self,
    limit: Option<usize>,
    offset: Option<usize>,
  ) -> Result<Vec<Conversation>>; {
    // Implementation sends DbCommand to actor
    todo!("Generated implementation")
  }

  /// Update conversation fields
  async fn update_conversation(
    &self,
    id: i64,
    title: Option<&str>,
    notes: Option<&str>,
  ) -> Result<bool>; {
    // Implementation sends DbCommand to actor
    todo!("Generated implementation")
  }

  /// Delete conversation by ID
  async fn delete_conversation(&self, id: i64) -> Result<bool>;

  /// Delete conversation by unique field
  async fn delete_conversation_by_url(&self, url: &str) -> Result<bool>; {
    // Implementation sends DbCommand to actor
    todo!("Generated implementation")
  }
}
